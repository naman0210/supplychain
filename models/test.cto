/*
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Write your model definitions here
 */

namespace org.supplychain1

abstract participant member identified by GST_number {
  o String GST_number
  o String name
  o String email
  o String location
}

asset config identified by key {
  o String key
  o String[] participants 
  o String[] type
}

participant Producer extends member {
  o String Produce
  --> Shipper_from_producer_to_processor[] shipperfromproducertoprocessor optional
  o Integer[] shipmentnumber optional
}

asset Item identified by item_ID {
  o String item_ID
  o String name
  o DateTime date
  --> Producer producer
  --> Shipment_from_producer_to_processor shipment_from_producer_to_processor optional
}

participant Shipper_from_producer_to_processor extends member {
  --> Producer producer
}

asset Shipment_from_producer_to_processor identified by shipment_ID {
  o String shipment_ID 
  o DateTime pickup
  o DateTime delivered_date optional
  --> Item[] items
  --> Shipper_from_producer_to_processor shipperfromproducertoprocessor
  --> Producer producer 
  --> Processor processor 
}

participant Processor extends member{
  o String type
  --> Item[] items optional
  --> Shipper_from_processor[] shipperfromprocessor optional
  o Integer[] shipmentnumber optional
} 

participant Shipper_from_processor extends member {
  --> Processor initiatingprocessor  
}

asset Shipment_from_processor identified by shipment_ID {
  o String shipment_ID
  o DateTime pickup
  o DateTime delivered_date optional
  --> Product[] products
  --> Warehouse warehouse optional
  --> Processor initiatingprocessor
  --> Processor receivingprocessor optional
  --> Shipper_from_processor shipperfromprocessor
}

asset Product identified by product_ID {
  o String product_ID
  --> Processor[] processors 
  --> Item[] items
  --> QI qualityinspector
  o Boolean approved default=false
  --> Warehouse[] warehouses optional
  --> Shipment_from_processor[] shipmentfromprocessor optional
  --> Shipment_from_warehouse[] shipmentfromwarehouse optional
  --> Retailer retailer optional
}

participant QI extends member {
}

participant Warehouse extends member {
  o String type
  --> Product[] products optional
  --> Shipper_from_warehouse[] shipperfromwarehouse optional
  o Integer[] shipmentnumber optional
}

participant Shipper_from_warehouse extends member {
    --> Warehouse initiatingwarehouse
}

asset Shipment_from_warehouse identified by shipment_ID {
  o String shipment_ID
  o DateTime pickup
  o DateTime delivered_date optional
  --> Product[] products
  --> Warehouse initiatingwarehouse
  --> Warehouse receivingwarehouse optional
  --> Retailer retailer optional
  --> Shipment_from_warehouse shipperfromwarehouse
}

participant Retailer extends member {
  --> Product[] products
}

transaction createItem {
  o String item_ID
  o String name
  --> Producer producer //date will be added automatically and we check if this field is same as the invoker
}

transaction createshipperfromproducertoprocessor {
  o String GST_number
  o String name
  o String email
  o String location 
   --> Producer producer  //we check if this field is same as the invoker
}

transaction createshipmentfromproducertoprocessor {
  --> Item[] items
  --> Shipper_from_producer_to_processor shipperfromproducertoprocessor
  --> Producer producer 
  --> Processor processor //pickup date is  added automatically shipping id is also added automatically
}

transaction delveryconfirmedbyproducertoprocessorshipper {
  --> Shipment_from_producer_to_processor shipmentfromproducertoprocessor
}//adding delivered date to a shipment

transaction createproduct {
  o String product_ID
  --> Processor processor
  --> Item[] items 
}//creating a product

// transaction editproduct {
//   o String product_ID
//   --> Item[] items
// }//if a subsequent processor wants to add a new item to the product

transaction qualityinspection { //left
  --> Product product
  o Boolean result
}

transaction createshipperfromprocessor {
  o String GST_number
  o String name
  o String email
  o String location
  --> Processor processor
}

transaction createshipmentfromprocessortowarehouse {
  --> Product[] products
  --> Shipper_from_processor shipperfromprocessor
  --> Warehouse warehouse
  --> Processor initiatingprocessor //shipper can be added automatically as only he is allowed to invoke the creation of                                      shipment pickup date is also added automatically shipping id is also added automatically
}

transaction createshipmentfromprocessortoprocessor {
  --> Product[] products
  --> Shipper_from_processor shipperfromprocessor
  --> Processor receivingprocessor
  --> Processor initiatingprocessor //shipper can be added automatically as only he is allowed to invoke the creation of                                      shipment pickup date is also added automatically shipping id is also added automatically
}

transaction delveryconfirmedbyprocessorshipper {
  --> Shipment_from_processor shipmentfromprocessor
}//adding delivered date to a shipment

transaction createshipperfromwarehouse {
  o String GST_number
  o String name
  o String email
  o String location
  --> Warehouse warehouse
}

transaction createshipmentfromwarehousetoretailer {
  --> Product[] products
  --> Shipper_from_warehouse shipperfromwarehouse
  --> Warehouse initiatingwarehouse
  --> Retailer retailer //shipper can be added automatically as only he is allowed to invoke the creation of shipment                               pickup date is also added automatically shipping id is also added automatically
}

transaction createshipmentfromwarehousetowarehouse {
  --> Product[] products
  --> Shipper_from_warehouse shipperfromwarehouse
  --> Warehouse initiatingwarehouse
  --> Warehouse receivingwarehouse //shipper can be added automatically as only he is allowed to invoke the creation of shipment                               pickup date is also added automatically shipping id is also added automatically
}

transaction delveryconfirmedbywarehouseshipper {
  --> Shipment_from_warehouse shipmentfromwarehouse
}//adding delivered date to a shipment

transaction initiate {
  o String[] participants 
  o String[] type
}